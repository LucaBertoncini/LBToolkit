unit uNonFocusableForm;

{$mode objfpc}{$H+}

interface

uses
  Classes, SysUtils, Forms, Controls, LResources, Graphics, uLBVirtualKeyboard;

type

  { TNonFocusableForm }
  // A form designed to never receive input focus.
  // Ideal for on-screen keyboards or tool palettes.

  TNonFocusableForm = class(TForm)
  strict private
    FVKeyboard : TKeyboard;
    FImagesList : TImageList;

    {$WARNING to be replaced with TBGRABitmap to avoid crash on destroy}
    FEmptyKey    : TBitmap;
    FBackSpace   : TBitmap;
    FSpaceKey    : TBitmap;
    FReturnKey   : TBitmap;
    FShiftKey    : TBitmap;
    FTabKey      : TBitmap;
    FSwitcherKey : TBitmap;

    function LoadImageListFromSerialization(): TImageList;
    procedure FindComponentClass(Reader: TReader; const aClassName: string; var aComponentClass: TComponentClass);
    procedure resizeKeyboard(Sender: TObject);

  public
    constructor Create(AOwner: TComponent); override;
    destructor Destroy; override;

    property EmptyKey    : TBitmap read FEmptyKey;
    property BackSpace   : TBitmap read FBackSpace;
    property SpaceKey    : TBitmap read FSpaceKey;
    property ReturnKey   : TBitmap read FReturnKey;
    property ShiftKey    : TBitmap read FShiftKey;
    property TabKey      : TBitmap read FTabKey;
    property SwitcherKey : TBitmap read FShiftKey;

    property VirtualKeyboard: TKeyBoard write FVKeyboard;
  end;

implementation

uses
  ULBLogger;

const
  cSerializedImages = String('object ImageList1: TImageList' + #13#10 +
  '  Height = 64' + #13#10 +
  '  Width = 64' + #13#10 +
  '  Left = 391' + #13#10 +
  '  Top = 26' + #13#10 +
  '  Bitmap = {' + #13#10 +
  '    4C7A0700000040000000400000005D2900000000000078DAED9D777C15C7B5C7' + #13#10 +
  '    370621635CE3923CDBD8496CE739765CE2D818E312173AC660D38B4215A88131' + #13#10 +
  '    08042A4808104842341B4C070B502F4802F5DE7BA1F72E09245D39F9BC875F82' + #13#10 +
  '    DFE7CD9B335BEEEEBDBB7BF74AB709CF1FE773DBDED9F9CD9C9939333BDFDDC6' + #13#10 +
  '    53E79886936067997A6C7527CE30C9473398E92ED39869D3A732B3E6BADE37CD' + #13#10 +
  '    657A9F6FBCBDFBFA07053DB03238B8DFCA55ABFA050405115BB90A7F5EBDBA5F' + #13#10 +
  '    10B6556BD6F60BC49F038357E3EFD9DFD8CFC1EC7BF2FD6AE13DFC877FCFFE16' + #13#10 +
  '    DC0F9FA39F7F20972EF7DF802072BE07E1BCFCF7900F7F2E0F60FE4181FDFC56' + #13#10 +
  '    AEECE71B10D0EF9BA5DE0F4C9FF9F73E3E7EBEF7B979B833AE6EF39963D9794C' + #13#10 +
  '    23D6DA74FA3C73E2EC45E6D4B94BCCE9F357987AACB78EB3EC8212C665F64C66' + #13#10 +
  '    E4E7C37B4D993AE9192F2FCF91BEFEFECB8282577FBB2664DD9E7561E160BBB1' + #13#10 +
  '    ED22161AB63B2434CCE03BF27EF77AFC9E37F83E2494FB5D7FCC2EEE7FE27477' + #13#10 +
  '    E3DFF684AC0F83F73B398373600BDD4BCE151AB65B38963B2F3EC74EEE3C7BF0' + #13#10 +
  '    317B578784ECC565F2DDD2E53E4BDCDCE77F3CFDEF2EBF9E3475CAAF62129299' + #13#10 +
  '    DAE3A72465507BFC3453DB748AC92FAD60E6B9BB31D367CE78D8CDD363EC86CD' + #13#10 +
  '    9B8E241C496D2E2829FBA9A4B2FA6E6955CDCFA555B5829555D5DC2D23AFDCE7' + #13#10 +
  '    EA5AF87CB7ACBAEE2E79CF5B15FFBDE8951C6368B577CBF12B5859559DE85851' + #13#10 +
  '    1AECF9E03B38DFCFF8586CC2713F0B868F2BAEA8BA9B535874E7504CECC5E090' + #13#10 +
  '    906D3367CF7A67FAD4C97DD2D2B389AF379DB940CAA0BAF124535C59C3782D5A' + #13#10 +
  '    C8E0B27A78B1B7F7ACFD870E37C1FF6B1A8F23B0EA06B026CED8CFFC6FC67642' + #13#10 +
  '    C5A4C7D58AAC469349D3AF6D624DF8AD419AD72A6C95F50D0897C37F6DFEF6BB' + #13#10 +
  '    A3B80C3EFC6ADC974E7925E5AC0F9CB9C854359C60E0F3B0A19FF671F7F418B1' + #13#10 +
  '    3732B20ED7F7FF56D637A2CA3AA955D53791F3D51F3F85EA4F18D87183574D76' + #13#10 +
  '    9A5803B153DCEB69D974F4BF9D964F0B1F0FE5007984BC56D436102BAFADC706' + #13#10 +
  '    655072272C6263CCD4E9D3FE38DDC5E5BEF29A7AE203653575CC0CDCE6C74D18' + #13#10 +
  '    F7ECBAF0F0C8FCE2B27F55E0FFE3DF59C3FF05CDE72E5D412DB7DB5147E73F88' + #13#10 +
  '    B5FF885F7FFCA7C4DA3BB95783EF05EB54F89E331D677C1AED0AC728FDBF4DF7' + #13#10 +
  '    23BADEDC8A4E9EBD80EBBD0995E1FCE3B68570FB24167F24A5D57BD932D7929A' + #13#10 +
  '    FABE4565554C13EE0F4BAA6A99095326F59AEFE1FEE1C1989853B8FDA0D26AF6' + #13#10 +
  '    78F82F94F98DD6DB24FDDB1D3FA296361D6ABEDD410CDE4B8DFDAE55E6FB66CE' + #13#10 +
  '    8CFF838F6F07EB14CCE89876E363E48E83EFDAA06EB05DBC7A9DF802D68770FB' + #13#10 +
  '    4625D8F28A4A7F0E8DD8983065DAD4E766CF99C3D4E0B69F5752C17C3CE4E33E' + #13#10 +
  '    CB7C7DA71DCDCE6DC3FE408E2DA9AC25FE04E509F520D6DD2CA341920F41935C' + #13#10 +
  '    59A86B32D266749C4E720C7F1E388E9433CEDF2D2807DD3FD0D98B97495D1695' + #13#10 +
  '    57A1A20AD676EEDDD7387BCEEC01E3278EBB0FF715B8FEEB98C0D521CEFEAB82' + #13#10 +
  '    3C32F30BFF1BCA0A8E83723B73E112294BD93AE1F2C69E575A07AD6D729AD4F5' + #13#10 +
  '    1AE96FD7A7AFFF9FB19F08FA253ED8816EE3B6D07CAB1DB7DD93447F617925D1' + #13#10 +
  '    15191D7DCD73E1821123478FE85D5655CF64E617316BD6AF730E5EB7DE2BBBB0' + #13#10 +
  '    E42738A6B0AC92B4FD4BD76E627FFAA7721D0B65D0494C5D9FCECC32106B57D0' + #13#10 +
  '    2F53FE7C19C0B1500627CE9EC7FA2B51415905D11F1D9FD0B2C2CF7FEC030F3C' + #13#10 +
  '    E094575CC1A466E430F3E6CE775E17B6C12BA7A8F427282B3816FAFFEBCDB784' + #13#10 +
  '    366F58E762BF93F34DE532D0EA0F72FA55CA549447BEAF813670E6C265DCFEAB' + #13#10 +
  '    59FD585B744262B37F60E057A0BF14FB7E766129AEFF70E7F51B22DCB1FE3B85' + #13#10 +
  '    9CFE2A3C065C6FB94DCA50B64D9BE9CFF2FAA5BFDFE2CC58BF89B622E39FACFE' + #13#10 +
  '    1F59FD15587F6905F103D01FC0E92F2AAF660AB0AD5917E21CB6699387443FA9' + #13#10 +
  '    7FD0FF0F7DBB56D4226FB7CC2A1B7C7C0767669CC3D05FC4ED81F481587F4905' + #13#10 +
  '    5BFF855CFDF3FA6393529942AC3F7CF346E7D088080FDCFEEF40DB27FE8FEBFF' + #13#10 +
  '    1AF83FE837BB9EB17570A6A18C6E09FA7F24D66AB67E9D547FBB8CFE52567F4C' + #13#10 +
  '    42D24DFF952BBF04FDD0F7E7975632FEAB8279FD3F1560FD782E80F537B0FAB9' + #13#10 +
  '    F66FAEFE5B1A8FE1EB5CCEFFC5FA6F99530E5CFDDFE6FC5F5FFF95282A3EF1A6' + #13#10 +
  '    5F00ABBFB8B296C9C3F39EC54B173B876EDCE89155587C474EBFF6BE5BD725BF' + #13#10 +
  '    976FFF5AC70C9D9109FA3B44FA4B59FDD8FF71FD070AFA8FE516305F2F5A44FA' + #13#10 +
  '    BFAC02D05FA151BFAE0B639BB96385DAF8271A8B0CFA67DEFF6FE1FA3FCDF57F' + #13#10 +
  '    F9A5E5645CC7FE7F23203088D55F51CBA4E71531B83C58FD8562FD8D0AFEAFB3' + #13#10 +
  '    C0D86E8E7E33CAC820F6BE4DC6BF4B587F95A01FFBBF30FEA567E733E9B9854C' + #13#10 +
  '    486818D6BFC1403F5FFFFF9089D195F4EABAA9D954FD779A1507B0EDFF9250FF' + #13#10 +
  '    05447F420BD63F0EF41FCDCA6172F1DCD73F6895A4FE0B4A0DFAFF2EF47FE68E' + #13#10 +
  '    79CAEDDF9CF294F6FFB745E33FD429A9FFB8F866BF800052FFF1C9A9587F0513' + #13#10 +
  '    BA6123D4BF9B6CFD43FCD36E3DFDD630B1FED322FD05BC7E7F567F266EFBD0FF' + #13#10 +
  '    87846D80FEDF2DBBB0F8BFE5FA3F5BE9BFD58DB1432EFE31AC7FD08FE3FFE680' + #13#10 +
  '    956CFBCF292A236B3FEBC2C240BF7BB650FFE59CFE5695F15F6703FD72730C13' + #13#10 +
  '    639F817E71FFCFEA4F6C09E0DA3FC47E30FF8FD8B2C5396CE326F71CD05FCAEA' + #13#10 +
  '    87B52389FE364BF5F93ACD3EDCDA66FE1C43B9FED9FE1FEB6FC5F10FA9FF7CAC' + #13#10 +
  '    1DEA7F75081BFFE3FAFF295FA4FFEACD56128F4AD7217426FA669D45CA403AFF' + #13#10 +
  '    57EEEF64635FC9F8AF1FFFB8FEBFD56FE54A52FF0565554C6E7139B36AED5A12' + #13#10 +
  '    FF81FF2BEA575DE7E9E4D600F4E756F24FCDF568B4D62237FF575B03E0F49FC7' + #13#10 +
  '    FACBC5FA1385FE3F03C77EA999B98CB7EF72E7F538FEC7FDFF4F7CFB27FA9BA5' + #13#10 +
  '    F52FBF2663AD3E416756FCAB5EFF5CFB2F67DBBFAF7F00A9FFB8E43426B3A098' + #13#10 +
  '    09C0E3FF3A49FC235FFF968D6FCCD16F5E3C29DBFE4BD8F11FC7FF2D2BFCFD49' + #13#10 +
  '    FD1FCBCA23FEEFEBEFCFEACF2FE2FABF0A85F6DFB5B5BCEEC77FE6FFA7A55D26' + #13#10 +
  '    FE61E7BF2D7CFF178FEB3FABA084090A0E06FF27F31FB5F66FBADFD3B256D5D5' + #13#10 +
  '    F98FA973EA64E7BFE2FE8F9DFF61FDFE6CFF07D73BE38E1C65D6AE5B8FE7FF78' + #13#10 +
  '    FC37A5BF4D3AC7686D33A7EF37B71F3435FF535FFF92D3CFB77FDCFF11FD3189' + #13#10 +
  '    294C547C32B3C47B09AE7F3CFFE7F4E7C9F57F8A7DA0CEAAFEDFA2A1FE5B14FA' + #13#10 +
  '    BFDB4AE35F40C078D07F283691CCFF376EFD969DFF15B0E33F8E09B0FE7AA3F6' + #13#10 +
  '    AF9617F158A4BC5E60A6FFB7698BFF84F14F36FEE3F49788E31FB6FEE3B1EF67' + #13#10 +
  '    E23610BE79ABF3BAF070F74C4E7F7E89D4FF55AFF718C6DD92FCEA14631453FA' + #13#10 +
  '    0DD334152399F4FF1261FCD7F77F29C7C8FC37620BAE7FAC5FBEFFEB54BDD625' + #13#10 +
  '    57EE9239896ABB516E43CAD7CA748AEB9DB2FA71FC03EBFE82FEB884167EFE07' + #13#10 +
  '    6B9F30FFDDB46D1BF4FF64FECBD77FB982FF9B3A678BC23A89B27E99FA6FEB54' + #13#10 +
  '    B9E6D2695CBE0ABE48C63FA3F82F01EA7F1C1BFF15B2FAB76E735E87F5671614' + #13#10 +
  '    DD81E3F2E5DABF8AAF4BCA42668D4EA99F529DCBCA5E1FD629CE75D4EA5FA21F' + #13#10 +
  '    D7BFFF4ABDFEACC2526603F6FF90F00DEE99F9CAFA8D34C85E7B549F0F29EB57' + #13#10 +
  '    F7FF56D135C616C3F4B4EA27FE5F01F5DFCCAFFFC3FA47467E1113B4662D89FF' + #13#10 +
  '    78FDFAFEBF45D9FF15CA44DCF7B5285DD7D7307ECAB7297E1E249F9E6AFBD7FB' + #13#10 +
  '    BFB0FE191597CC44C6C4E1F95F30EEFF61FCD3EB87F67F05EB6F35E8FF0CD758' + #13#10 +
  '    E5FC5BD0641837B6E964C675B9F66F7A8F44AB89BA97AF7F6EFD93F37F58FF4D' + #13#10 +
  '    C3B60ACFFFD9F1BFE82769FD1BF4FFEDF23E2FF505F1F57F736200F5B66DB23D' + #13#10 +
  '    6918FF45FD1FA9FF84947432FEAD59BF9ED76FB2FED5F77218D7ABF67513D37B' + #13#10 +
  '    5B0CDB94D6F1AF583AFE35F3FAD3327398ECA23226703559FFF680FACF2B2943' + #13#10 +
  '    60B0FFE1CA8D16721EF9BD3E2A63A1818FC8B68F3615DF68EB945D6B695158E7' + #13#10 +
  '    33D3FF5B85F58F9C02263DAF90591B1A0AF5CFE9C7F55FAC517F574D653C6F6D' + #13#10 +
  '    D769DE6BA36E1D32F14F053A1C172FC4BF07A3E298A8846466BED75C887FBC04' + #13#10 +
  '    FD2556D62FD36E5A15F7F27435FD0E61FD4BACFF506C5CABDF4A76FDF7FBDDFB' + #13#10 +
  '    991FA2E398F9AE3359FDF985ACFF93FAAF63DB3FA7BF99ECA9E04D792F9B65AD' + #13#10 +
  '    43E3311D46796B16F45F24FB3EF2B12E886D0FC7C60BFD1F3FFEAF21FD7F04EC' + #13#10 +
  '    FF22FA738B4BC9DE3F71FDEBF7BE29EFE5B3649934B7F17B0C3B34EA37C81FEC' + #13#10 +
  '    83C3B1CBA97317C9BC2F8FD71F170FEB7FDCFA772503D74056ADD6EBCFC5759F' + #13#10 +
  '    53548A4A05FD3A7413A775F3B671FACD0ADFB5C8E4BB99DF3F28F223E9311DB2' + #13#10 +
  '    FAF9F45BE4CAFCB68E9CAB59C124FA8B59FD8770FDFB72FD5F626A3AD1BF2664' + #13#10 +
  '    3DC47F1E19F98577A0EEB30B4BC81EC8CBD79B49FDDFBCDDAED7AFD50CEB45F6' + #13#10 +
  '    18915EBEDC54D2333285636F1AE88735CD5CA2BF1CDABFA03FBBA094C43F6BC3' + #13#10 +
  '    C271FC1FEE919E9BFF534E5109C2F3605266E7AF5C23F1CC8D5B583F18570E37' + #13#10 +
  '    CD280355FD5630368FED9CFE4E74FCCC79D2F7E5629FCE63F50BD73FB67EB793' + #13#10 +
  '    399A5BC0AC0B0F730E090BF33896937F07EA1ECF03481B80FF92FAE7F54BCAA1' + #13#10 +
  '    5D52DEA6CAC59C72BBC9E950AB5B63CDFAFFDD148D57B0FF33076B025DD00780' + #13#10 +
  '    7E5F6EFC8B8A4F22EB3F3EBECB9DB10F781ECBC9BB03759F915788D2730BC8DE' + #13#10 +
  '    EF1BAD6D241DF0811B86E5A064B7655ED5DE1B96E7AD0EC532377A6F607C1EA1' + #13#10 +
  '    DEA0FF82B56FD003BAA06D1F8C89695DE1EB374E887FF01CD8C3D39DE84FCBCE' + #13#10 +
  '    BD83FB4084FD00A565E5E2FF15A1C6536785F679E3561B290FC16E894CF8AE5D' + #13#10 +
  '    A3B51994679B910E49FA92EF0DD361ED3A777EBEAFADC3759F09759953805F59' + #13#10 +
  '    9F3E18130BFB5F89FEFCB24A2613CFFF7DFCFD9CD7AC0FF348CDCAB903F50EDA' + #13#10 +
  '    5332B2D191F42CF2BF13B81DB4703E05E95F6F9596C37591DDB090B1E9DD36EB' + #13#10 +
  '    3F503E6C5DB5E37A3B83EBAF00A564E6A0A3D979C49FB30B8B51644C6CF30AD1' + #13#10 +
  '    FA17FE9D993C692CEC7F5E702423EB27DC06502A683F968992D2D25162EA3194' + #13#10 +
  '    96998BAAEB9BB03F35EBD7FC3B44FB153B64F63D7648F7B6C8FD6E7AFFA7F1DE' + #13#10 +
  '    00214D9934403BECD986B5CBB4AC1C94742C83D4612A5706D0AFFD101DDBBCDC' + #13#10 +
  '    CF8FAC7FC0DEDFF8D463CC8489939CFD8383BD12D3D2EF40DD2763EDF83D4A48' + #13#10 +
  '    398AE28FA4A1386247894F403F0A8C04EC0FE6AD52F45EB07A8357A5E3C4C7E3' + #13#10 +
  '    32164CF6B746A971BF835E18AFB3711B873C26E03A4B483946EA2EE968BA5006' + #13#10 +
  '    E003BB0F445E59B068D1B071E3C7F586FA8FC73140DFBE7D9D17792F713D1417' + #13#10 +
  '    FFCF94F46CF29F84D4A358732A8A4D4A4131894750B4C862C496247A25962232' + #13#10 +
  '    D1EFE2E30D7F4F92FE3F3AC9F0F823A2E3F5E9C74ACE95C21D8FBF4F4E257516' + #13#10 +
  '    8FEB2F819441062E175206FFB779DBF69AB9F3E7BD35DBD5F53ED8FFB8F3C041' + #13#10 +
  '    E68D37FFB3B7EBFC7943BEDBB1EB62525A06F90FFC9FE405342724A3289145CB' + #13#10 +
  '    995CD97016AD60EAC74AD38D363846355DBE7CB872C0711EF169FCFE5F2B57AF' + #13#10 +
  '    DE3FC565DA7FB82F58C080FEACC21266CAF4A9BF9A3079C2737E8181D1876213' + #13#10 +
  '    FE053E1FCB69279AE393D0616CF01A959064540E46E522E42F5964225D46DF89' + #13#10 +
  '    34251C912FDF846483FF1A948F282F7CDAE02FB1C929821F7CBB73F765F7055E' + #13#10 +
  '    13860EFDD819CF7599F2DA4626B704FAC05C66F8904FFBCC73731B1116B1A91E' + #13#10 +
  '    6BFD5F283BC84B547C32D17E58A10CF49624E30F6C5E64FD46B60C928D7C4DFC' + #13#10 +
  '    DF28B9FF2724CBFBA75006AC1FEC893CF4E3727FFF8839AE739E76F37427EB5E' + #13#10 +
  '    15754D64FD1F6280C54B9731AE6EEE0F792E5C302B74E3A6E391317177A3B9FA' + #13#10 +
  '    803288523887246F0ABE1DADA50D70ED5CD64F12E4FD4562095C5EC56D116B8F' + #13#10 +
  '    4A3CF27FDFEFDDDFEEE3EBB717FBF99FC78CFDA2D7FE838709F744F497561083' + #13#10 +
  '    71D0CDD393993B7FFE4373E7B97E8963E4942DDB7734EF3B18F53F78CCF83932' + #13#10 +
  '    261EECEE0F31F1FF8E8C8DFFF741B0B804D644EF0F7176303641FFBBF4F35DFC' + #13#10 +
  '    9E35FCFE505CE2BFC124BF411AF189C4F8FFE273DE0513A7CB1EA33F2FBC46E2' + #13#10 +
  '    FFC37107A262FF67C7DE039D2161E1355F7FF3CD8A692ED35F183F615CAFEDBB' + #13#10 +
  '    F731B0EFA9ACA681A9C4FAF3E01A1867894733996953C6336FBFFC54EF899327' + #13#10 +
  '    F59F3567CEE75E5F7FBDEC1BEFA5E1D83F362EF159BEC1DB6779F8D2E5CBC396' + #13#10 +
  '    AE5811B67439D8F2306F1F1F7885EFC397E1EF97AD60BFE7DF2FE38EC5AFA1F0' + #13#10 +
  '    CAA6B182D8B215BEE43F4BD9E3C2390BF3F1F50DC5BF85F1B6947CCF7FC6E9C0' + #13#10 +
  '    F1BEBEC4D8FFFA42DAA1DE380F38AF1BBE5EB26495BB97E78CE933A6BFE1326B' + #13#10 +
  '    E6032E336730B147529922DCE79556D793B65F597F5CD0CE97437671191E1322' + #13#10 +
  '    992FC77DC98C1D3B8699317BF67D5F7D35AEF7F0A1C39C860F1FE63472E470A7' + #13#10 +
  '    11C3873A8D1836947C1E3E7C88D3D0219FE1EFD8DF47101BEA3472C470A7D1A3' + #13#10 +
  '    46398D1A3912BFC7C78F60FF3B7CD830A761242D9C0E3E66E4A8114EA3467FEE' + #13#10 +
  '    F4F9E7A39D3E1F35D269F4E7F8337E1D857F1B36F833FCFD48A72FF0EF5F7C31' + #13#10 +
  '    0ABF8EC6690FC7690EC7C7B2698F86DFF16F23468E701A8AD31E8AF33564E860' + #13#10 +
  '    A74953A6F67AF94FAFFC6AE07B0399B96EF39998E414A6B0A28629AE62F583EF' + #13#10 +
  '    57D59F204C3CE5FF29FF4FF97FCAFF53FE9FF2FF94FFA7FC3FE5FF29FF4FF97F' + #13#10 +
  '    CAFF53FE9FF2FF94FFA7FC7F77F97F88491A700CBD63FB77C863B60B9A30F443' + #13#10 +
  '    F4E527EF76C9BEFAEC3DE43A653CDA1CB10195623DD0CF3932FF0F6348CA9114' + #13#10 +
  '    346DF4B02E6B56B2E96386A15D3BBE279CAA23F2FF704D322D35AD5BF56DCA66' + #13#10 +
  '    4FF802C5C5C63A1CFF0F3E9F999189260CB39E76DEBC3DE6A2BAC62687E2FFF3' + #13#10 +
  '    F2F2B1F68F24ED76A9A72BAAC1E976EB7E0AF8BF274F9F43EB8383F43E30710C' + #13#10 +
  '    E7038EC1FF97E3F626D1FEE940B4D86D36EE034F5A84FF076D25C52542FA1387' + #13#10 +
  '    FF0D7DBB31CC21F8FF0A3C6F9C3CF213BD7F62ED9E33A7A05A1C4F5A92FFAFAE' + #13#10 +
  '    AE91B481D0203FBBF3FF553575A44F16E76BDEB471A806A76569FE5F5EBFFDF8' + #13#10 +
  '    FF6AEC2FB3268C96E4093E43995883FF97D36F2FFEBF06FB36D4F3979F0C948C' + #13#10 +
  '    CD9555D556E3FF65F5DB81FFAF6B6822ED1BFA38717F545955A3A8EDE295EB28' + #13#10 +
  '    72FF3EB4D07516DAB373073A77F18AE4F786E327D02A5F1FF27B7E4101D9CFA4' + #13#10 +
  '    C5FF6DCDFF434CBB68DE4CA976DCEF97E2FFABD56D6666269A35712C397EDCE0' + #13#10 +
  '    F7D1B6CD11E8FCA5AB5C9A27C958C1A7E931CB055DBE765373FBB715FFDF78FC' + #13#10 +
  '    245AEAE58AF3F99E900718F30A0A0A4DCE8FC4FAC1C60F791FEDDAF62D2AC3F5' + #13#10 +
  '    E3B3D08DC40AFC6FE6E9B70DFFDF74F234F2FDC64B924FD09E959925EBAB86FD' + #13#10 +
  '    DE85CB57D1F62D11A4EEF565F0016937D2343F44D959D95C9A3A93EDDF16FCFF' + #13#10 +
  '    C9D3675190CF62693E717C7F342D0DDD6CBDAD799E7A0EE76B73D83A4919880D' + #13#10 +
  '    D24C4B4D217B20E5D63FB5F47FD6E0FF0FECDB2319E3219FC94949649E672EFF' + #13#10 +
  '    7FE6FC4514BE260897C12023ED4909F124FE50E285B5F47FD6E0FF0FEC95D77F' + #13#10 +
  '    ADE596D9FCBF9AFEC4F87874FD66AB59F19F2DF8FF13D8FF0315FC1FAE9369E5' + #13#10 +
  '    FFCF12FF0F51F5FFD49414E2579AF5DB88FF6F3AA1DCFFF17BCFD5F8FFF397AE' + #13#10 +
  '    68EEFFB270FF7753E8FFF4655A5D5DAD4DBF95F8FF0618FF3C8DC73F88574CF1' + #13#10 +
  '    FF99991978FC1BA379FCBB74ED86D1B500ADEDDF9AFC7F7DD3711CFFCC50897F' + #13#10 +
  '    E4F968B17E7DFC734588A916BBCD32887F6E74BDFFB732FF5F87637FF5F8D798' + #13#10 +
  '    D7BD70E51AFA41887FBFC7F1EF65A3B832888B7FF3F2D9F8D790FF375BBF15F9' + #13#10 +
  '    FFDAFA06D9F94F795595D5F87F73F4DB82FFAFAEAB379EFF8E1F8D2AAA6BACC2' + #13#10 +
  '    FF9BD3FFD98AFFAFAAA9955DFFA8AAADB338FFDF95F1DF16FC7F059EF34BD6BF' + #13#10 +
  '    709BF09C3105D5D4375894FFEF5AFBB70DFF5F565129B3FE390B8F17272CC2FF' + #13#10 +
  '    C3FE86A2E262E9FA6744B843F1FFB9B97946EBDFDE385E80F530925E17F97FF8' + #13#10 +
  '    EFF19367D0DAC00021ED39782C8D8F8D7528FE1FE2C08CF40CDB5DFF68687238' + #13#10 +
  '    FE1F62F7B4D454AB5FFF8AC575EFA8FC3F5C4349C1F39869632C7FFD73C65723' + #13#10 +
  '    D1E18391244E7164FE1FDA421D8E95776CDB86BCE6FC1DB789BF75EFFAF7B409' + #13#10 +
  '    68EBC6081C63D652FE9FF2FF94FFA7FC3FE5FF29FF4FF97FCAFF53FE9FF2FF94' + #13#10 +
  '    FFA7FC3FE5FF29FF4FF97FCAFF53FE9FF2FF94FFA7FC3FE5FF29FF4FF97FCAFF' + #13#10 +
  '    53FE9FF2FF94FFA7FC3FE5FF29FF4FF97FCAFFDB84FFD7DAFF99F7FC47D158E4' + #13#10 +
  '    C0FC7FD79F05A933BF8C1C8CFFB7DCF35FCD280707E1FFCD1DF394DBBF39E5E9' + #13#10 +
  '    38FCBF3DCDDEFC7FABC5FAFFCE6EC53FF6E0FF2DAB5FDBF35F5B159E0B666BFE' + #13#10 +
  '    5F7B9FD67DFEDF94EFDB9AFFB7ECB8D6A9F139993A8DCF7FB72EFF6FF8FC63F1' + #13#10 +
  '    7E7D6BF1FF72E7B407FF6FBD3E416756FCAB5EFFD6E1FF6DA7DFBC78D216FC7F' + #13#10 +
  '    D7B4EAACA8BFD366FCBFDAB3D84DAF557575FE63EA9C3A9BF0FFE239466B9B39' + #13#10 +
  '    7DBFB9FDA0A9F99FFAFA97B5F87FF9E7785BCFFF5B34D4BFD2B3C9ADC1FF2BE5' + #13#10 +
  '    453C1669E5FF4DEA6FD316FF697DFEAF25F87F930C9C46FEDF24FF27FB4C6DE5' + #13#10 +
  '    18C9A4FF5B90FF37751DC814FFAF252E52BE56A6535CEFB425FFDFD2AE765D4F' + #13#10 +
  '    3D3E35D90FB6756A7E5EB09A2F5A93FFAF6B3C8E162EFA068D1E3316C5272693' + #13#10 +
  '    B9B29CFE1695185D752E2B7B7D5847F6C527A71D435FE0F3BA7B7AA15A23EECF' + #13#10 +
  '    36FC7F60F01AF4E4534F218661D0DF3EFE04359E38ADF89C76D9F66AA22F34D4' + #13#10 +
  '    CF5F6384F6FCC96783C9797FFDF8E308C7B2663CFFDA72FCFFA8D15F903CF056' + #13#10 +
  '    8A632C63565F6771FE1FF67A88CFFBC9A79F29B6476BF2FFB2FA0DDBA961DC68' + #13#10 +
  '    01FEBF414EBF79CF3FB708FF6FA8BFACB25A7F7F8636B531BF7BFC7F8352FD6B' + #13#10 +
  '    18FF2DC9FF2BEBD719B5F9568D639E16FEBF5E4DBF0DF9FF458B97A0471E7944' + #13#10 +
  '    C8474E4191FE3883798861DFD91DFEBFBCBA4638E7430F3D8C3CBC1698EBFF16' + #13#10 +
  '    E1FFB7EFDC859EFFDDEF84BCF8F8FAA19367CF6B7EEE7D57F8FFB3172F21FF95' + #13#10 +
  '    41C2399F79E619B475DB76C5E7A25B93FF2FC269FDE5ADBF4A7CD1D6F6CAABAF' + #13#10 +
  '    A242DC5E95F45B93FF873D7121EBC3D06F7EF35BBB687F1C8FFDABD6AC25DC24' + #13#10 +
  '    BBBFCEF6FCFF85ABD7D1CAA06092175B6A7F18F73B10F7C01EBF1643CEDCC6FC' + #13#10 +
  '    3FEC11CACA2B40BE018168D0FBEFA35EBD7A594DF7BB03DF432BFCFC51566E3E' + #13#10 +
  '    CB25DFD651FE9FF2FF94FFA7FC3FE5FF29FF4FF97FCAFF53FE9FF2FF94FFA7FC' + #13#10 +
  '    3FE5FF29FF4FF97FCAFF53FE9FF2FF94FFA7FC3FE5FF29FF4FF97FCAFF53FE9F' + #13#10 +
  '    F2FF94FFA7FC3FE5FF29FF4FF97FCAFF53FE9FF2FF94FFA7FCBFD5F87F4803F6' + #13#10 +
  '    469F3E77F117C7FF43FCB867FF0F64EFD6DBEF0C207B117F29FC7FF3AD0E1497' + #13#10 +
  '    982CEC5D7BF4D147D137DE4B2DC2FF9755D648F63F3B22FF9F782455B44FF921' + #13#10 +
  '    E4EEB5C062FCBFB17EC7E2FF730B8A84FCE1F3A0D9735D2DCAFFCBD5BFA3F0FF' + #13#10 +
  '    794525E8BEFBEE237973767646535D5C2CCEFF036BA065FFBFADF9FFC29232D4' + #13#10 +
  '    AF5F3F92AFDEBD7BA37113265885FF37BFFEADCFFF1763BF79FCF127847C011F' + #13#10 +
  '    622DFE5FBEFDDB8FFF2FC5EDEBD9679F15F2F4D1C71F5B95FF57EEFF6CCFFF97' + #13#10 +
  '    57D5A0175F7A49C8CFFB1F7E48D660ADC9FFAB8D7FB6E4FFAB718CFCDAEBAF4B' + #13#10 +
  '    F6A817E03EA0A6A1C962562DF39D786C35C9BF5989FFAFC2F1D1DB0306D8957F' + #13#10 +
  '    31E21F6DC8FFA71C4D47AFBCFA67C7D16F07FE3F313915BDF0E24B92FC009313' + #13#10 +
  '    BA21C23216CE99CA3187A263ECCAFFC72624A3FEFD9F13F4CF9AE32AEAFF7E19' + #13#10 +
  '    FC7F544C3C7AEAA9DF086530CFCDFD9EE7FF0D3F471E8A468F3CF2A85006EC5C' + #13#10 +
  '    CFF2FCBF1A236C4BFE5FEEDAE3BE1F0EA1FBFBF6E562FFFB91CF0A3F8BF3FF2D' + #13#10 +
  '    86E969D56F61FE5FA94C76EF3B20CC7F1E7CF041E4BF729545F9FF1695FB09D8' + #13#10 +
  '    92FF9763E2F97C7CBF6B8F7EDDE3B1C750F09A108BF1FF8A6DDFC6FCBF7CFEF4' + #13#10 +
  '    FC7FF8C64D4219C07D32D6876FB008FFAFD89E6CCCFFB7A8F800BCC2DAE19A75' + #13#10 +
  '    A142193CFDCC332862CBD66EF3FF2D6AFA6DC8FFCB8E0706E501FB2702028389' + #13#10 +
  '    FE3FBFF61A591FE82EFF2FB7CE670FFE5FAB9DBB7415EDDE7B00E51614779BFF' + #13#10 +
  '    D7A2D956FCBF45AC5DE1DE2806FBC9BA66D6E5FF9BDBAC54266DE6EAEFB01BFF' + #13#10 +
  '    2FB7E7C452DA796EDA7419D897FF97FBAE4526DF3C932AF623E9311DB2FA0D59' + #13#10 +
  '    7A8976CAFF53FE9FF2FF94FFA7FC3FE5FF29FF4FF97FCAFF53FE9FF2FF94FFA7' + #13#10 +
  '    FC3FE5FF29FF4FF97FCAFF53FE9FF2FF94FFA7FC3FE5FF29FF4FF97FCAFF53FE' + #13#10 +
  '    9FF2FF94FF7700FEFFFCA5ABA89CF431977F71FC3FACD3C37DF3615F8CF7B2E5' + #13#10 +
  '    C2F59A5F0AFF1FB179AB64CFF4EAB5EB7E31FC7FCAB174F4DAEB6F183DC7222E' + #13#10 +
  '    F1C83DCFFFD73636A1692E7F97DDC73F6EFC445481E3CD7B95FFBF8C63093CC6' + #13#10 +
  '    0A7A274E9A4CF4CE98395BF82E70D56A1CB7DEB8E7F87FB2473E365ED03970D0' + #13#10 +
  '    2094919D4B7ECBC92F22CF4FE37F035E1AAE5FDE4BFC7F46769EA0EF3F9E7E9A' + #13#10 +
  '    F88178CCDBB8E55BF46CFFFEC231C037DD2BFC7F3D8EBF077DF0A1A06DCCD8AF' + #13#10 +
  '    648F9B326DBAE43927E592BEA067F2FF97AEDD40CB96AF10747DFAD96092A6D2' + #13#10 +
  '    7D123E173D53ECEBC54BD0B98B57EE19FEFF8D37DF449535EA755A8DCF0975CF' + #13#10 +
  '    FFE787435164EDA1454BFCEF60FC3FF8BDB0F7FBE967D08EDD7B35F5657BF747' + #13#10 +
  '    4A9E2B066C6D577CDF9EFC3FBCF2F9EFDBB72F729931D3AC7500D7F96EA8DF83' + #13#10 +
  '    0F0A69E8EF9BA1537DDEB723F0FF60E276FCD21FFF68F6DC1FD27EF3CDBF0869' + #13#10 +
  '    0C1E3294EC07527BE6B223F0FFF0DDD6EDDF0BFC0F8C75172E5FEB52DF79E1CA' + #13#10 +
  '    35F4C28B2F0A6500ACA3E6B98F1DF87FFEBE0CFCFD0F1E7CE821947A2CB35BFC' + #13#10 +
  '    FFB1CC6CF4C4134F4A9E31AA2516B035FF0F06C78A9F85B770D1628BF0FFDECB' + #13#10 +
  '    7CC87D34F8FBA8903D681AE2405BF1FFBCFDE1851704EDCFF67FCEA2FC3FB033' + #13#10 +
  '    7CDABFFDED6F4DDE23C056FC3FBF17D0CDD34BF07BB0AB1C37D0F5FB79498FBF' + #13#10 +
  '    8963803E7DFA085CE52CC9FD643AEDC2FFF37DE0C1A868F48CE8DE17C0FA41DC' + #13#10 +
  '    C35A92F03E3BAF4093EEDCC262144BFE97445EF9F7E111229EEEC927D1FEC883' + #13#10 +
  '    CA7D9F0DF87FB0DA86E3E87583B50C251BF4FE079AFC7FC8D0619AD28371B5BA' + #13#10 +
  '    BE511AF3D990FF87DFE03E275AEF5300FA4D8F9FDAF5937B8A0D18407CD41EFC' + #13#10 +
  '    3FDCE728362189B5C424FDFB04BDCF6FDFB15356BF5A0C29D60FEB847CFAFAB6' + #13#10 +
  '    845F13F4ED23A7A0D0EEFCBF3CABDC499E4D6F5ABF72FD0BCFB6ED01FCBF39FA' + #13#10 +
  '    D5F87F39FD3D85FF378C11A17FD4A65F67527F4FE1FFC5AC7E8D61FD6BE0FF95' + #13#10 +
  '    FCBF27F1FFBCA6DA7AA97E2DFCBFACFE1EC8FFCBB57F2DFCBFB2FE9EC5FFCBB5' + #13#10 +
  '    7F2D31B0BAFE9EC5FFD7D4AB8C7F0AD71414F5F740FEDF48BF06FE5F497F4FE4' + #13#10 +
  '    FF15F5ABF0FF8AFA7B20FF6F52BF8C0D365BBFE3F2FF35787ED62DFD25E53D9A' + #13#10 +
  '    FF17EBEF8A81FE9ECCFFD7D459487F0FE5FFABEB2DA89FF2FF94FFA7FC3FE5FF' + #13#10 +
  '    29FF4FF97FCAFF53FE9FF2FF94FFA7FC3FE5FF29FF4FF97FCAFF53FE9FF2FF94' + #13#10 +
  '    FFA7FC3FE5FF29FF4FF97FCAFF53FE9FF2FF94FF7760FE5FED59C8F73AFFAF54' + #13#10 +
  '    E7BF14FE5FA25DF1F9D7F726FFDF95E71FDF2BFC7FF79E7FD9B3F97FF3FBCF7B' + #13#10 +
  '    87FFEFFEF35F7B36FFAF65CC536EFF3D9BFF57B2723C2FD9BD773F2A29AFEA72' + #13#10 +
  '    1A47D28EE9EFA731798AC3F1FFCA9C7B239A3C652AC9F7975F8D2365215FFFE6' + #13#10 +
  '    E89FEC50FCBF9A15E37168F4176384BC43594099288D7F4AE56FA8DF91F87F53' + #13#10 +
  '    7D7A5E61091A324CBFD771C6CC59A8AEE984C4875B4D30C772FEEF28FCBF9632' + #13#10 +
  '    C8C8C9471F89EEFD326FBE1B6A3A794666FE2F9FB644FFA4C90EC3FF8BF7EB9B' + #13#10 +
  '    1AC7528F65A081A27B5E2C58F835BBDFC868ADC5587FB2A17E07E0FFBBD21F24' + #13#10 +
  '    24A7A0BFBCF596A0C57BA90F19B74DB531C5FECF4EFC7F77FA447886B0F879DA' + #13#10 +
  '    7EFE2BC93D10B4B7FFC976E5FF2D11F31E883C8C5E7C49FF3CEDE0D56BD1E5EB' + #13#10 +
  '    37CDD06F3FFEBF55F35A957A59ECDCBD173DF7DCF3FAFB5E846D40D75B6EC9A6' + #13#10 +
  '    6DD8FFD982FF2FC56518C773BE22D6373651FAD9D8C41CAFDA71C9E4FE297DB9' + #13#10 +
  '    E728836DDAF22DF74C7113FDBF0DF8FF99B3E7D8E539F7DB77EC52D72FD3FF59' + #13#10 +
  '    83FFB797FEBD0722D5DBFFA4C936E1FF61BE2266DDF97B34187ED6DFFF416FB1' + #13#10 +
  '    06F77450F2FF4F3EFD4CB8DF05A9FB9DBB39FFEF346BFCB726FFAF761DC88851' + #13#10 +
  '    958D1DE4FBD28D5BB69267258BDBFE35A1FF93F6B39AF4DB91FF57BA3F95D258' + #13#10 +
  '    F1DDF61DE8F9E7F5F7FE82FB040283A31473998A7FEDCDFFB7B6CBF3D172FCFF' + #13#10 +
  '    CE3DFB24F77B0A5ABD06C73FD755F97FADF56F2FFE5F9557167D0FF77279F94F' + #13#10 +
  '    7F12B4ACF00B40672F5E91A429C7FF9BA5DF0EFC7F8BD2757D915F1C8E8945AF' + #13#10 +
  '    BDFEBAA063B1F752C26CC9B72929FF9F9C6A46FBB703FFDF6A18371A94595C52' + #13#10 +
  '    329EF7FC55D0E0E1B5109D387D5676CF809C5F69D56F2FFE5F3EE6D5717D573A' + #13#10 +
  '    1AF0EE4021FF735CE7A1C613A715EF6D21D79E92CD1CFF6DCDFF0BEB3806969E' + #13#10 +
  '    9583DEFFE00321EFD35D66A0BAC61326F7B618B629F3DBBF6DF97F63DF600DEE' + #13#10 +
  '    033A01E717F23D7EE2245455D720F595B64ED9B516C372EEA2FFDB8CFF57F397' + #13#10 +
  '    0A5C06070E1E16D67EE5AE5F9ADA6BA3AEDFFEFCBF39EDA655712F4FCFE5FFBB' + #13#10 +
  '    6F1D3D9AFFEF8EF17C774FE6FFA57A74467E243DA643567F4FE6FF5B4C70FAE2' + #13#10 +
  '    79B5506E2AE9F534FEDF543EAD6194FFA7FC3FE5FF29FF4FF97FCAFF53FE9FF2' + #13#10 +
  '    FF94FFA7FC3FE5FF29FF4FF97FCAFF53FE9FF2FF94FFA7FC3FE5FF29FF4FF97F' + #13#10 +
  '    CAFF53FE9FF2FF94FFA7FCBF2DF8FFF397AE92FD0E4ACFB7FAE0C38FD08EDD7B' + #13#10 +
  '    D099F317BBCC8B3A1AFF0FFB07E0B9955DD9EFECB73290E33F7A26FFFFEDB61D' + #13#10 +
  '    16D9F70DCFD3030EAFA7F0FFE7B09FF7EAD5CB48C71FFEF00279B6398CC9B2CF' + #13#10 +
  '    3BBD7C0D1D8E8E43AFBCF2AA6C39B07BA41C9BFFFF7ED71E74FFFDF74B9EFD3B' + #13#10 +
  '    DFDD935C9B3287FF876B81788C428F3CF288A40C42C337382CFF0FCFF9C6690A' + #13#10 +
  '    79FDDBC71F0BFB67BACAFF83DF0327DBBB776F92A69393139AEFE6E170FC7F40' + #13#10 +
  '    50307A585457EBC3365894FF8771812F03F0A9055F7FE330FC3FF01AFDFB3F27' + #13#10 +
  '    683F70300A1F6F79FE1FF68CF2E778E28927083B6F6FFE1FF6D688F72FC3F8CE' + #13#10 +
  '    EF3DB086C526E89F27FF9F2FBF8C8EC35E699567A05B9BFF074E4718AF030255' + #13#10 +
  '    59C5AEDDFF456A108F06AF0D11CEF9EEC0F754E31F6BF2FFC09EBCF22A3B5641' + #13#10 +
  '    9F2FDDC76AD9FBDF88CB1FF6623CFFBBDF93F3FEFEF77FC06366AC31676303FE' + #13#10 +
  '    5FFC8CF7A319D9DC9C4B3BFFAF65FEABC4FFE717950AE7061F547A26A6B5F8FF' + #13#10 +
  '    BCC2623460C0BBE4FCC3868F30D8BBAEB34819A8F1FFD0EF4CE2EE9FF1DA6BAF' + #13#10 +
  '    A38CEC5C13CF7FB72CFF3F91DBBB0E06EC3ACFE79BC3FFC7C425A03163BF447B' + #13#10 +
  '    F61DD036A79394AD0E65E5E60B7918857D516E0E680DFE1FE69513264E12CE0D' + #13#10 +
  '    FD80B9E37BE29154E1B9D1D08744C5C69B7DFF9FECFC42210F233F1FCDAE2DDA' + #13#10 +
  '    80FF877DFB9F7CC6F6FB73E7B9A1E3A7CE98AD1FD8AE055F2F12F20F65016562' + #13#10 +
  '    CE7A11ECEBF658B0907DB6DAA0F7515965B54DF8FF5D7BF7098CFEF73BF7A01B' + #13#10 +
  '    784CEACAFA0794C13C3777A10CE0FE0F4733B234EB8738E360540CF96FFFFEFD' + #13#10 +
  '    C9B3A26DC1FF8BF967A9DF9ACFFF9F3C7B1E4D737111D27B67C000E2D7CA7D87' + #13#10 +
  '    FDF97F89FE9838D5F81EEAA8A2BA4E95FFDFBCF53BF4F63BEF0869FEF5EDB751' + #13#10 +
  '    7E71A986FBBFD99FFF8F8A8D536DF3C04F02CF6CEE9AC7FB1F7E4418A95613BC' + #13#10 +
  '    B0BDF97FB1FF8BC73F3EAFA03FA20BFA612D10FAD9D63633EEFF6423FE5FACFF' + #13#10 +
  '    30F67F25269A5FC7A8C071B11AFFBF11F75B6FFDF56D21CDF7DE1BC43EF75396' + #13#10 +
  '    A9B53FFF6FA4BF1BFCFFC9B3E714FB3FE56B65F6E5FF77E179F74B2FFD51B82F' + #13#10 +
  '    03CC11BBC2FFC3F5E4F9EE1EF2E35F5BA7CA3517D1F877389A1BFF9E237E640B' + #13#10 +
  '    FEBF127FFFE9E0C17A6617C73FE6F2FFB0066A1CFFA4283EDB5CAEFF873980BB' + #13#10 +
  '    A797F06CD9F2AA5A9BF0FF24FE15C5FFC0609ACBFF2760ADAF99887F0DD334E4' + #13#10 +
  '    FFC5F1EF28887F65AEC75B8BFF87B1863F773C9EFF08B1B719FC7F24F6DDCF06' + #13#10 +
  '    0FE1EE6B6362FE63C0FF8319CD7FDA7536E3FFE1B9ACEF72F76C83E715D73636' + #13#10 +
  '    7589FF578C1D4CEC913875F602E1A649DB79E34D949D5768CEF3CF2DC2FF8F12' + #13#10 +
  '    AD7FC03DECF86BCE5AF97F53D70394F87F384F6E51B164FDC3E87E2436E0FFE1' + #13#10 +
  '    FE05FCFDDAF4EB5FDAF87F2D6B204AFCFFF133E724EB5F87626215EF45636DFE' + #13#10 +
  '    5FBCFE09F7ECBB74F58626FEBF55766DCB34FF0FF701F20F0814AD7F0E54DD87' + #13#10 +
  '    636DFEFF1C9EC38A63B7DDFB0E08BCA096FB2529DD434EE93F70AF14FE5C70BF' + #13#10 +
  '    9853E72EA872D1B6E0FF13928EA0FECFE9AF7FC09CDC1AFC7F664E9EFEFAC793' + #13#10 +
  '    4F926BA98EC2FFAF0B0D478F3EF69890BF90F56116E5FF21CEE4AF7FC135C665' + #13#10 +
  '    3E2B1C8EFF5FB5662DEAD7EF41FD3C66D020723DA43BFC3F9C7FF88891C2F574' + #13#10 +
  '    A73E7DC8FD811C95FF87F67FFFFDFAFB16F6EBD70F2D59E683FBADDB66F1FFC0' + #13#10 +
  '    7DAE0E598F1E7BECD7927931AC25383AFF7FF2CC79D9FD0FB06608F3C5F397AF' + #13#10 +
  '    C9EEA384BD76B0060AEBF9726B023086F724FE7FC3C64D16D9FFB27C851FA987' + #13#10 +
  '    9EC8FF439DAE59B7BE4BBA7D7CFDC8F87A4FF0FFD8200E857EFC5DD1BD9EC5F6' + #13#10 +
  '    FA1B6FA0884D5BD0F1D3E795D3A4FC3FE5FF29FF4FF97FCAFF53FE9FF2FF94FF' + #13#10 +
  '    A7FC3FE5FF29FF4FF9FF6EF0FFFF0F5DFFF912' + #13#10 +
  '  }' + #13#10 +
  'end');

{ TNonFocusableForm }

constructor TNonFocusableForm.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);

  FImagesList := Self.LoadImageListFromSerialization();

  if FImagesList <> nil then
  begin
    FEmptyKey := TBitmap.Create;
    FEmptyKey.HandleType := bmDIB;
    FEmptyKey.SetSize(FImagesList.Width, FImagesList.Height);
    FImagesList.GetBitmap(0, FEmptyKey);

    FBackSpace := TBitmap.Create;
    FBackSpace.HandleType := bmDIB;
    FBackSpace.SetSize(FImagesList.Width, FImagesList.Height);
    FImagesList.GetBitmap(1, FBackSpace);

    FSpaceKey := TBitmap.Create;
    FSpaceKey.HandleType := bmDIB;
    FSpaceKey.SetSize(FImagesList.Width, FImagesList.Height);
    FImagesList.GetBitmap(2, FSpaceKey);

    FReturnKey := TBitmap.Create;
    FReturnKey.HandleType := bmDIB;
    FReturnKey.SetSize(FImagesList.Width, FImagesList.Height);
    FImagesList.GetBitmap(3, FReturnKey);

    FShiftKey := TBitmap.Create;
    FShiftKey.HandleType := bmDIB;
    FShiftKey.SetSize(FImagesList.Width, FImagesList.Height);
    FImagesList.GetBitmap(4, FShiftKey);

    FTabKey := TBitmap.Create;
    FTabKey.HandleType := bmDIB;
    FTabKey.SetSize(FImagesList.Width, FImagesList.Height);
    FImagesList.GetBitmap(5, FTabKey);

    FSwitcherKey := TBitmap.Create;
    FSwitcherKey.HandleType := bmDIB;
    FSwitcherKey.SetSize(FImagesList.Width, FImagesList.Height);
    FImagesList.GetBitmap(6, FSwitcherKey);
  end;

  Self.OnResize := @Self.resizeKeyboard;
end;

destructor TNonFocusableForm.Destroy;
begin
  try
    (*
    LBLogger.Write(5, 'NonFocusableForm.Destroy', lmt_Debug, 'Destroying single bitmaps ...');

    if FEmptyKey <> nil then
      FEmptyKey.Free;

    if FBackSpace <> nil then
      FBackSpace.Free;

    if FSpaceKey <> nil then
      FSpaceKey.Free;

    if FReturnKey <> nil then
      FReturnKey.Free;

    if FShiftKey <> nil then
      FShiftKey.Free;

    if FTabKey <> nil then
      FTabKey.Free;

    if FSwitcherKey <> nil then
      FTabKey.Free;
    *)

    if FImagesList <> nil then
    begin
      LBLogger.Write(5, 'NonFocusableForm.Destroy', lmt_Debug, 'Destroying image list ...');
      FreeAndNil(FImagesList);
    end;

  except
    on E: Exception do
      LBLogger.Write(1, 'TNonFocusableForm.Destroy', lmt_Error, E.Message);
  end;

  LBLogger.Write(5, 'NonFocusableForm.Destroy', lmt_Debug, 'inherited Destroy ...');

  try
    inherited Destroy;

  except
    on E: Exception do
      LBLogger.Write(1, 'TNonFocusableForm.Destroy', lmt_Error, E.Message);
  end;
end;

function TNonFocusableForm.LoadImageListFromSerialization(): TImageList;
var
  _Stream : TStringStream = nil;
  _Component : TComponent = nil;

begin
  Result := nil;

  try
    _Stream := TStringStream.Create(cSerializedImages);
    ReadComponentFromTextStream(_Stream, _Component, @Self.FindComponentClass);
    if _Component is TImageList then
    begin
      Result := TImageList(_Component);
      _Component := nil;
    end
    else
      LBLogger.Write(1, 'TNonFocusableForm.LoadImageListFromSerialization', lmt_Warning, 'Wrong component!');

  except
    on E: Exception do
      LBLogger.Write(1, 'TNonFocusableForm.LoadImageListFromSerialization', lmt_Error, E.Message);
  end;

  if _Component <> nil then
    _Component.Free;

  if _Stream <> nil then
    _Stream.Free;
end;

procedure TNonFocusableForm.FindComponentClass(Reader: TReader; const aClassName: string; var aComponentClass: TComponentClass);
begin
  if aClassName = 'TImageList' then
    aComponentClass := TImageList
  else
    aComponentClass := nil;
end;

procedure TNonFocusableForm.resizeKeyboard(Sender: TObject);
begin
  if FVKeyboard <> nil then
    FVKeyboard.DrawKeyboard();
end;

(*
procedure TNonFocusableForm.Loaded;
{$IFDEF LINUX}
var
  Display: PDisplay;
  WindowType, State: TAtom;
{$ENDIF}

begin
  inherited Loaded;

  // After the form and its handle are created, apply platform-specific styles.
  {$IFDEF WINDOWS}
  // On Windows, add the WS_EX_NOACTIVATE style.
  // This prevents the form from becoming the foreground window when clicked.
  // WS_EX_TOOLWINDOW prevents it from appearing in the taskbar.
  SetWindowLongPtr(Handle, GWL_EXSTYLE, GetWindowLongPtr(Handle, GWL_EXSTYLE) or WS_EX_NOACTIVATE or WS_EX_TOOLWINDOW);
  {$ENDIF}

  {$IFDEF LINUX}
  // On Linux, set X11 properties to make it a non-focusable dock/utility window.
  if Handle <> 0 then
  begin
    Display := XOpenDisplay(nil);
    if Display <> nil then
    try
      // Set the window type to DOCK to hint the window manager.
      WindowType := XInternAtom(Display, '_NET_WM_WINDOW_TYPE', False);
      State := XInternAtom(Display, '_NET_WM_WINDOW_TYPE_DOCK', False);

      if (WindowType <> 0) and (State <> 0) then
        XChangeProperty(Display, Handle, WindowType, XA_ATOM, 32, PropModeReplace, @State, 1);

      XSync(Display, False);
    finally
      XCloseDisplay(Display);
    end;
  end;
  {$ENDIF}
end;
*)

end.

